<div class="mb-4 mt-sm-4">
    <div class="row">
        <div class="col-12 embed-responsive embed-responsive-16by9">
            <video id="player" autoplay controls class="embed-responsive-item" src="{{ source.url }}"></video>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-auto d-none d-md-block">
            <a href="/series/{{ theme.series.id }}">
                <img class="img-fluid rounded img-cover" src="{{ theme.series.image }}">
            </a>
        </div>
        <div class="col-9 col-md-auto my-auto mr-auto">
            <h5 class="text-nowrap text-truncate"><span class="badge badge-secondary mr-1">{{ typeString }}</span>{{ theme.title }}</h5>
            <h6 class="text-muted text-nowrap text-truncate">
                <a href="/series/{{ theme.series.id }}">{{ theme.series.title }}</a>
            </h6>
        </div>
        <div class="col-auto my-auto order-last order-md-0 text-right">
            <a tabindex="0" id="playlist-add" href data="{{ theme.id }}">
                <i class="material-icons">
                    playlist_add
                </i>
            </a>
        </div>
        <div class="col-auto my-auto text-right d-none d-md-block">
            <h5 id="version-display" class="text-nowrap">{{ version.string }}</h5>
            <h6 id="tag-display" class="text-nowrap text-muted">
                {{#each source.tags}}
                    <span class="badge badge-secondary ml-1">{{ string }}</span>{{#unless @last}}&nbsp;{{/unless}}
                {{else}}
                    <i>No tags</i>
                {{/each}}
            </h6>
        </div>
    </div>
    <hr>
    <div class="row mt-3">
        <div class="col-12 col-md-8 order-last order-md-first mt-3 mt-md-0">
            <h4>Other themes:</h4>
            <div class="list-group mt-2">
                {{#each themes}}
                    {{> _themeListItemSmall}}
                {{/each}}
            </div>
        </div>
        <div id="related-content" class="col-12 col-md-4 order-first order-md-last mt-3 mt-md-0">
            <h4>Other versions:</h4>
            <div class="list-group mt-2">
                {{#each theme.versions}}
                    {{#each sources}}
                        {{> _sourceListItem version=../this source=this}}
                    {{/each}}
                {{/each}}
            </div>
            {{#if playlist}}
                <h4 class="mt-3">Playlist:</h4>
                <div id="playlist" class="list-group">
                    {{#each playlist}}
                        <a class="list-group-item{{#if this.active}} active"{{else}} list-group-item-action" href="/watch/{{ this.theme_id }}"{{/if}}>
                            <div class="text-truncate mr-1">{{ this.theme_title }}</div>
                            <div class="text-truncate text-muted">{{ this.anime_title }}</div>
                        </a>
                    {{/each}}
                </div>
            {{/if}}
        </div>
    </div>
</div>

<script defer src="/js/watch.js"></script>